<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <title>PWC Leaflet </title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
    integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
    crossorigin="" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet-easybutton@2.4.0/src/easy-button.css" />
  <link href="https://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet">
  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
    integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
    crossorigin=""></script>
  <script src="https://leaflet.github.io/Leaflet.Editable/src/Leaflet.Editable.js"></script>
  <script src="https://unpkg.com/leaflet-easybutton@2.4.0/src/easy-button.js"></script>
  <script src='https://npmcdn.com/@turf/turf'></script>
  <script type="module"
    src="https://unpkg.com/@paraboly/pwc-leaflet-entity-selector@latest/dist/pwc-leaflet-entity-selector/pwc-leaflet-entity-selector.esm.js"></script>
  <script nomodule
    src="https://unpkg.com/@paraboly/pwc-leaflet-entity-selector@latest/dist/pwc-leaflet-entity-selector/pwc-leaflet-entity-selector.js"></script>
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
    }

    #leaflet-example-map {
      height: 100vh;
      width: 100vw;
    }
  </style>
</head>

<body>
  <div id="leaflet-example-map">
    <pwc-leaflet-entity-selector></pwc-leaflet-entity-selector>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", e => {
      var geojson = { "type": "FeatureCollection", "features": [{ "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "Polygon", "coordinates": [[[30.464562, 38.261059], [30.464562, 41.790878], [31.001502, 41.790878], [31.001502, 38.261059], [30.464562, 38.261059]]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "LineString", "coordinates": [[31.743742, 38.335421], [32.628113, 40.10923], [33.607238, 38.236254]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "LineString", "coordinates": [[32.106966, 39.123869], [33.165053, 39.148368]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "LineString", "coordinates": [[33.575654, 40.060899], [33.528277, 39.099362]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "LineString", "coordinates": [[33.607238, 39.660867], [34.144178, 39.136119]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "Polygon", "coordinates": [[[35.802374, 39.01352], [35.802374, 40.000438], [36.134013, 40.000438], [36.134013, 39.01352], [35.802374, 39.01352]]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "Polygon", "coordinates": [[[32.596528, 39.70948], [32.343851, 39.282958], [32.880791, 39.282958], [32.596528, 39.70948]]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "Polygon", "coordinates": [[[37.878244, 39.008315], [37.878244, 39.865672], [38.123125, 39.865672], [38.123125, 39.008315], [37.878244, 39.008315]]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "Polygon", "coordinates": [[[38.188426, 39.021], [38.188426, 39.198345], [39.037345, 39.198345], [39.037345, 39.021], [38.188426, 39.021]]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "Polygon", "coordinates": [[[36.621192, 41.438535], [37.127278, 41.144145], [37.372158, 40.934815], [36.572216, 40.389933], [36.621192, 41.316034], [36.621192, 41.438535]]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "Polygon", "coordinates": [[[38.13945, 41.193302], [37.535412, 41.168728], [37.339508, 40.51416], [38.057823, 40.427225], [38.1068, 40.66293], [37.698666, 40.66293], [37.714991, 40.836077], [38.025173, 40.836077], [38.008847, 40.971804], [37.763967, 40.996452], [38.13945, 41.193302]]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "Polygon", "coordinates": [[[38.433307, 41.438535], [38.759814, 40.501748], [39.608733, 41.634056], [39.249575, 41.670651], [38.841441, 40.996452], [38.433307, 41.86547], [38.155776, 41.792482], [38.433307, 41.438535]]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "#0433ff", "fillColor": "#0433ff", "border": "" }, "geometry": { "type": "Polygon", "coordinates": [[[36.800771, 41.045719], [36.76812, 40.737191], [37.078302, 40.897805], [36.800771, 41.045719]]] } }, { "type": "Feature", "properties": { "controlType": "TEXT", "text": "@Paraboly", "mode": "FREE", "text-align": "center", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 700, "padding": 5, "weight": 5, "background-color": "#ff9300", "opacity": 0.8, "fillOpacity": 0.4, "color": "#0433ff", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "", "transform": "" }, "geometry": { "type": "Point", "coordinates": [33.715278, 40.885464] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "LineString", "coordinates": [[35.991882, 38.223849], [35.044342, 40.024629], [33.607238, 38.236254]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "LineString", "coordinates": [[32.106966, 39.123869], [33.165053, 39.148368]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "Polygon", "coordinates": [[[32.596528, 39.70948], [32.343851, 39.282958], [32.880791, 39.282958], [32.596528, 39.70948]]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "Polygon", "coordinates": [[[31.050138, 41.768253], [31.037812, 40.167533], [32.714183, 41.065748], [31.050138, 41.768253]]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "Polygon", "coordinates": [[[33.601673, 40.073275], [33.946808, 39.742344], [33.57702, 39.694938], [33.601673, 40.073275]]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "Polygon", "coordinates": [[[34.748015, 39.400293], [34.99454, 39.751822], [35.278044, 39.133087], [34.526142, 39.123525], [34.748015, 39.400293]]] } }, { "type": "Feature", "properties": { "text": "", "mode": "FREE", "text-align": "left", "font-size": 14, "font-style": "initial", "font-family": "sans-serif", "width": 120, "height": 30, "font-weight": 400, "padding": 5, "weight": 5, "background-color": "transparent", "opacity": 0.8, "fillOpacity": 0.4, "color": "rgba(47, 64, 80, 0.9)", "fillColor": "rgba(47, 64, 80, 0.9)", "border": "" }, "geometry": { "type": "Polygon", "coordinates": [[[36.190186, 39.988331], [36.596953, 39.609525], [36.338101, 39.438382], [36.633932, 39.075696], [36.140881, 39.037409], [36.190186, 39.988331]]] } }] };

      var map = L.map('leaflet-example-map', { editable: true }).setView([39.8974639, 32.7736711], 6);
      L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
        maxZoom: 18,
        id: 'mapbox/streets-v11',
        tileSize: 512,
        zoomOffset: -1,
        accessToken: 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw'
      }).addTo(map);

      map.addLayer(L.geoJSON(geojson));

      var pwcEntitySelectorControl = document.querySelector("pwc-leaflet-entity-selector");

      pwcEntitySelectorControl.registerControl(map);

      pwcEntitySelectorControl.addEventListener("controlEvents", control => {
        if (control.detail.event === "EDIT_COMPLETED") alert("There are " + control.detail.features.length + " in selected area.")
        console.log(control);
      })
    });
  </script>
</body>

</html>
